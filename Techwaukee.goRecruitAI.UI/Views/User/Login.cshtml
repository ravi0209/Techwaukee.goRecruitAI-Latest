@{
    Layout = null;
}


<!--
=========================================================
* Soft UI Dashboard PRO - v1.0.7
=========================================================

* Product Page:  https://www.creative-tim.com/product/soft-ui-dashboard-pro
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="~/images/apple-icon.png">
    <link rel="icon" type="image/png" href="~/images/favicon.png">
    <title>
        GorecruitAI | Login
    </title>
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <!-- Nucleo Icons -->
    <link href="~/css/nucleo-icons.css" rel="stylesheet" />
    <link href="~/css/nucleo-svg.css" rel="stylesheet" />
    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <link href="~/css/nucleo-svg.css" rel="stylesheet" />
    <!-- CSS Files -->
    <link id="pagestyle" href="~/css/soft-ui-dashboard.css?v=1.0.7" rel="stylesheet" />
    <style>
        /* Increase the size of the checkbox */
        .form-check-input[type="checkbox"] {
            transform: scale(0.8); /* Adjust the scale factor as needed */
        }
    </style>
</head>

<body class="">
    <div class="bg-overlay loader_cls" id="div_Loader">
        <section class="fullscreen">
            <div class="container-fullwidth">
                <div class="row justify-content-center p-60">
                    <div class="col-md-12 text-center">
                        <img class="h-100 w-100" src="~/Images/loader.gif" id="imgLoader" />
                    </div>
                </div>
            </div>
        </section>
    </div>
    <div class="container position-sticky z-index-sticky top-0">
        <div class="row">
            <div class="col-12">

                <!-- End Navbar -->
            </div>
        </div>
    </div>
    <main class="main-content mt-0">
        <section>
            <div class="page-header min-vh-100">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-4 col-lg-5 col-md-7 d-flex flex-column mx-lg-0 mx-auto">
                            <div class="card card-plain">
                                <div class="card-header pb-0 text-start">
                                    <h5 class="font-weight-bolder text-info text-gradient">Welcome back</h5>
                                    <p class="mb-2 text-dark" style="font-size: 12px;">Enter your email and password to receive a OTP</p>
                                </div>
                                <div class="card-body">
                                    <form role="form" class="text-start">
                                        <div class="mb-2">
                                            <input type="email" id="txtEmail" class="form-control" placeholder="Email" aria-label="Email">
                                        </div>
                                        <div class="mb-2">
                                            <input type="password" id="txtPwd" class="form-control" placeholder="Password" aria-label="Email">
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="rememberMe" checked="">
                                            <label class="form-check-label" style="font-size: 12px;" for="rememberMe">Remember me</label>
                                        </div>
                                        <p class="mt-1 ni-red" style="font-size: 12px;" id="errorMessage">
                                            Invalid User/Password. Please try again.
                                        </p>
                                        <div class="text-center">
                                            <button type="button" id="btnOTP" class="btn bg-gradient-info w-100 mt-4 mb-0">Send OTP</button>
                                        </div>
                                        <div class="card-footer text-center pt-0 px-lg-2 px-1">
                                            <p class="mb-4 mt-3 mx-auto" style="font-size: 12px;">
                                                <a href="~/user/forgotpassword"> Forget password?</a>
                                            </p>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-7 d-lg-flex d-none h-100 my-auto pe-0 position-absolute top-0 end-0 text-center justify-content-center flex-column">
                            <div class="position-relative bg-gradient-info h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center">
                                <img src="~/images/pattern-lines.svg" alt="pattern-lines" class="position-absolute opacity-4 start-0">
                                <div class="position-relative">
                                    <img class="max-width-500 w-50 position-relative z-index-2" src="~/images/Light.png" alt="chat-img">
                                </div>
                                <h5 class="mt-5 text-white font-weight-bolder">"AI and Automated Recruitment Solution"</h5>
                                <p class="text-white" style="font-size: 12px;">Advanced AI platform automates multi-channel candidate sourcing, automated screening, and data-driven insights for faster, smarter hiring decisions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!--   Core JS Files   -->
    <script src="~/js/jquery.multi-select.min.js"></script>
    <script src="~/js/jquery.multi-select.js"></script>
    <script src="~/js/jquery.js"></script>
    <script src="~/js/core/popper.min.js"></script>
    <script src="~/js/core/bootstrap.min.js"></script>
    <script src="~/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="~/js/plugins/smooth-scrollbar.min.js"></script>
    <!-- Kanban scripts -->
    <script src="~/js/plugins/dragula/dragula.min.js"></script>
    <script src="~/js/plugins/jkanban/jkanban.js"></script>
    <!-- Github buttons -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="~/js/soft-ui-dashboard.min.js?v=1.0.7"></script>

</body>

<script>
        $(document).ready(function () {
            document.querySelectorAll('#btnOTP')
                .forEach(input => input.addEventListener('click', this.click));
        });
</script>
<script>

    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
        var options = {
            damping: '0.5'
        }
        Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
    $(document).ready(function () {
        $("#div_Loader").hide();
        $('#errorMessage').hide();

        $('#btnOTP').click(function () {
            //$("#div_Loader").show();
            if ($('#txtEmail').val() == undefined || $('#txtEmail').val() == "") {
                //alert("UserId is empty!")
                $('#errorMessage').show();
                //$("#div_Loader").hide();
                return false;
            }
            else if ($('#txtPwd').val() == undefined || $('#txtPwd').val() == "") {
                //alert("Password is empty!")
                $('#errorMessage').show();
                //$("#div_Loader").hide();
                return false;
            }
            else {
                $('#errorMessage').hide();
                $("#div_Loader").show();
                //
                //var UserLogin = {
                //    EmailId: $('#txtEmail').val(),
                //    Password: $('#txtPwd').val(),
                //    OTP: "",
                //    RememberMe: false
                //};
                var user = {
                    EmailId: $('#txtEmail').val(),
                    Password: $('#txtPwd').val(),
                    OTP: "",
                    RememberMe: false
                };
                
                //var userStr = JSON.stringify(user);
                
                $.ajax({
                    type: "POST",
                    url: "/user/login",
                    dataType: 'json',
                    data: user,
                    success: function (response) {
                        if (response != null && response != undefined)
                        {
                            
                           
                            if (response.status == "Failed")
                            {
                                $("#div_Loader").hide();
                                $('#errorMessage').show();
                                return false;
                            }
                            else if (response.status == "Success")
                            {
                                console.log(response);
                                $("#div_Loader").hide();
                                location.href = "/user/verification";     
                            }
                            
                        } 
                        else {
                            $("#div_Loader").hide();
                            $('#errorMessage').show();
                        }
                    },
                    error: function (xhr, status, error) {
                        $("#div_Loader").hide();
                        //var err = eval("(" + xhr.responseText + ")");
                        //console.log(err.Message);
                        $('#errorMessage').show();
                    }
                });
            }
        });
    });

</script>
</html>